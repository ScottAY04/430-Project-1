<!DOCTYPE html>
<html lang="eng">
<head>
    <title>Country API Project</title>
    <link rel="stylesheet" type="text/css" href = "/style.css">

    <script>
        const handleResponse = async (response, method) => {
            const content = document.querySelector('#content');



            if(method && response.status !== 204){
                const obj = await response.json();
            }else{
                //puts out nothing for now
            }
        }

        const requestUpdate = async (getHead ,sectionGiven) => {
            let method ;
            //for the get or head method
            {
                //for the get or head response
                const methodSelector = getHead.querySelector('#getButton');
                if(methodSelector.checked){
                    method = methodSelector.getAttribute('value');
                }else{
                    method = 'head';
                }
            }

            //for the actual request stuff
            const section = sectionGiven.getAttribute('action');

            if(sectionGiven.getAttribute){

            }

            let response = await fetch (section, {
                method,
                headers:{
                    'Accept': 'application/json',
                },
            });

            handleResponse(response, method === 'get');
        }

        

        const init = () => {
            const methodType = document.querySelector('#methodType');

            //all get/head requests
            const getAll = document.querySelector('#allCountry');

            const getAllCountries =(e) => {
                e.preventDefault();
                requestUpdate(methodType, getAll);
                return false;
            }

            getAll.addEventListener('submit', getAllCountries);
        }

        window.onload = init;
    </script>
</head>

<body>
    <h1>Countries API App</h1>
    <section id="getHeadArea">
        <!-- Get or head selector --->
        <h2>
            <section id="methodType">
                <label for="methodType">
                <input id="getButton" type="radio" name="method" value="GET" checked>GET
            </label>
            <label for="methodType">
                <input type="radio" name="method" value="HEAD">HEAD
            </label>
            </section>
        </h2>

            <form id="allCountry" action = '/allCountry'>
                <h2>/api/getAllCountries</h2>
                <button id="allCountryButton" type="submit">Send Request</button>
            </form>

            <form id="byContinent" action = '/byContinent'>
                <h2>/api/getCountryByContinent</h2>
                <label for="continent">Continent: </label>
                <input id="inputResponse" type="text" name="Continent">
                <br>
                <button id="continentResponse" type="submit">Send Request</button>
            </form>

            <form id="firstLetter" action="'/firstLetter">
                <h2>/api/getCountryByFirstLetter</h2>
                <label for="continent">First Letter: </label>
                <input id="inputResponse" type="text" name="First Letter">
                <br>
                <button id="continentResponse" type="submit">Send Request</button>
            </form>

            <form>
                <h2>/api/getCountryByContinent</h2>
                <label for="continent">Continent: </label>
                <input id="inputResponse" type="text" name="continent">
                <br>
                <button id="continentResponse" type="submit">Send Request</button>
            </form>
    </section>

    <section id="postArea">
        <h2>Post Area</h2>
        <form method="post">
            <h2>/api/getCountryByContinent</h2>
            <label for="continent">Continent: </label>
            <input id="continentField" type="text" name="continent">
            <br>
            <button type="submit">Send Request</button>
        </form>
        <form method="post">
            <h2>/api/getCountryByContinent</h2>
            <label for="continent">Continent: </label>
            <input id="continentField" type="text" name="continent">
            <br>
            <button type="submit">Send Request</button>
        </form>
    </section>
    <section id="content">
    </section>
</body>
</html>